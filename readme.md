=> [25/85] COPY ballerinai-observe-0.0.0.jar /home/ballerina/jars/ 0.0s
=> [26/85] COPY ballerinax-mysql-1.12.0.jar /home/ballerina/jars/ 0.0s
=> [27/85] COPY ballerinax-mysql.driver-1.6.0.jar /home/ballerina/jars/ 0.0s
=> [28/85] COPY bcpg-jdk18on-1.78.jar /home/ballerina/jars/ 0.0s
=> [29/85] COPY bcpkix-jdk18on-1.78.jar /home/ballerina/jars/ 0.0s
=> [30/85] COPY bcprov-jdk18on-1.78.jar /home/ballerina/jars/ 0.2s
=> [31/85] COPY bcutil-jdk18on-1.78.jar /home/ballerina/jars/ 0.0s
=> [32/85] COPY cache-native-3.8.0.jar /home/ballerina/jars/ 0.0s
=> [33/85] COPY commons-pool-1.5.6.wso2v1.jar /home/ballerina/jars/ 0.0s
=> [34/85] COPY constraint-native-1.5.0.jar /home/ballerina/jars/ 0.0s
=> [35/85] COPY crypto-native-2.7.2.jar /home/ballerina/jars/ 0.0s
=> [36/85] COPY file-native-1.9.0.jar /home/ballerina/jars/ 0.0s
=> [37/85] COPY http-native-2.11.3.jar /home/ballerina/jars/ 0.0s
=> [38/85] COPY io-native-1.6.0.jar /home/ballerina/jars/ 0.0s
=> [39/85] COPY jakarta.activation-api-2.0.1.jar /home/ballerina/jars/ 0.0s
=> [40/85] COPY jboss-marshalling-2.0.5.Final.jar /home/ballerina/jars/ 0.0s
=> [41/85] COPY jwt-native-2.12.1.jar /home/ballerina/jars/ 0.0s
=> [42/85] COPY log-native-2.9.0.jar /home/ballerina/jars/ 0.0s
=> [43/85] COPY lz4-1.3.0.jar /home/ballerina/jars/ 0.0s
=> [44/85] COPY mime-native-2.9.0.jar /home/ballerina/jars/ 0.0s
=> [45/85] COPY mimepull-1.9.11.jar /home/ballerina/jars/ 0.0s
=> [46/85] COPY mysql-connector-j-8.0.31.jar /home/ballerina/jars/ 0.1s
=> [47/85] COPY mysql-native-1.12.0.jar /home/ballerina/jars/ 0.0s
=> [48/85] COPY mysql.driver-native-1.6.0.jar /home/ballerina/jars/ 0.0s
=> [49/85] COPY netty-buffer-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [50/85] COPY netty-codec-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [51/85] COPY netty-codec-http-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [52/85] COPY netty-codec-http2-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [53/85] COPY netty-codec-socks-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [54/85] COPY netty-common-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [55/85] COPY netty-handler-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [56/85] COPY netty-handler-proxy-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [57/85] COPY netty-resolver-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [58/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-linux-aarch_64.jar /home/ballerina/jars/ 0.0s
=> [59/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-linux-x86_64.jar /home/ballerina/jars/ 0.0s
=> [60/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-osx-aarch_64.jar /home/ballerina/jars/ 0.0s
=> [61/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-osx-x86_64.jar /home/ballerina/jars/ 0.0s
=> [62/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-windows-x86_64.jar /home/ballerina/jars/ 0.0s
=> [63/85] COPY netty-tcnative-boringssl-static-2.0.65.Final.jar /home/ballerina/jars/ 0.0s
=> [64/85] COPY netty-tcnative-classes-2.0.65.Final.jar /home/ballerina/jars/ 0.0s
=> [65/85] COPY netty-transport-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [66/85] COPY netty-transport-native-unix-common-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [67/85] COPY oauth2-native-2.11.0.jar /home/ballerina/jars/ 0.0s
=> [68/85] COPY observe-internal-native-1.2.2.jar /home/ballerina/jars/ 0.0s
=> [69/85] COPY observe-native-1.2.3.jar /home/ballerina/jars/ 0.0s
=> [70/85] COPY opentelemetry-sdk-common-1.0.0.jar /home/ballerina/jars/ 0.0s
=> [71/85] COPY opentelemetry-sdk-testing-1.0.0.jar /home/ballerina/jars/ 0.0s
=> [72/85] COPY opentelemetry-sdk-trace-1.0.0.jar /home/ballerina/jars/ 0.0s
=> [73/85] COPY opentelemetry-semconv-1.0.0-alpha.jar /home/ballerina/jars/ 0.0s
=> [74/85] COPY org.wso2.transport.local-file-system-6.0.55.jar /home/ballerina/jars/ 0.0s
=> [75/85] COPY os-native-1.8.0.jar /home/ballerina/jars/ 0.0s
=> [76/85] COPY os-test-utils-1.8.0.jar /home/ballerina/jars/ 0.0s
=> [77/85] COPY protobuf-java-3.20.3.jar /home/ballerina/jars/ 0.0s
=> [78/85] COPY quartz-2.3.2.jar /home/ballerina/jars/ 0.0s
=> [79/85] COPY sql-native-1.13.2.jar /home/ballerina/jars/ 0.0s
=> [80/85] COPY task-native-2.5.0.jar /home/ballerina/jars/ 0.0s
=> [81/85] COPY time-native-2.4.0.jar /home/ballerina/jars/ 0.0s
=> [82/85] COPY url-native-2.4.0.jar /home/ballerina/jars/ 0.0s
=> [83/85] COPY dineth-inventory_store-0.1.0.jar /home/ballerina/jars/ 0.0s
=> [84/85] RUN addgroup troupe && adduser -S -s /bin/bash -g 'ballerina' -G troupe -D ballerina && apk add --update --no-cache bash && rm -rf /var/cache/apk/\* 17.6s
=> [85/85] WORKDIR /home/ballerina 0.0s
=> exporting to image 0.5s
=> => exporting layers 0.5s
=> => writing image sha256:18bc04ef2a94489864c269c28cf31b9c848fdc586bed1607c785160d625f04a8 0.0s
=> => naming to docker.io/dinethsiriwardana/invenroty_app:0.1.0 0.0s

1 warning found (use --debug to expand):

- InvalidBaseImagePlatform: Base image ballerina/jvm-runtime:2.0 was pulled with platform "linux/amd64", expected "linux/arm64" for current build (line 2)

View build details: docker-desktop://dashboard/build/desktop-linux/desktop-linux/qck1m1jjjyji8gtil4zh2tfyn

What's next:
View a summary of image vulnerabilities and recommendations → docker scout quickview

Execute the below command to deploy the Kubernetes artifacts:
kubectl apply -f /Users/dineth/Dineth/Programming/Ballerina/inventory_store/target/kubernetes/inventory_store

Execute the below command to access service via NodePort:
kubectl expose deployment inventory-store-deployment --type=NodePort --name=inventory-store-svc-local

        target/bin/inventory_store.jar

dineth@MacBookAir inventory_store % docker push dinethsiriwardana/inventory_app:0.1.0
The push refers to repository [docker.io/dinethsiriwardana/inventory_app]
An image does not exist locally with the tag: dinethsiriwardana/inventory_app
dineth@MacBookAir inventory_store % docker push dinethsiriwardana/invenroty_app:0.1.0  
The push refers to repository [docker.io/dinethsiriwardana/invenroty_app]
5f70bf18a086: Preparing
54e05ffa0f45: Preparing
583448b702cd: Preparing
8049811dd204: Preparing
19fb0c2a73f3: Preparing
3691253a27d3: Waiting
440a16f4ec48: Waiting
63ac3e276c36: Waiting
b8474cf9330c: Waiting
73e2258524be: Waiting
0642b5a40eeb: Waiting
f87e675d21b1: Waiting
f55558b3fbce: Waiting
2402d3109723: Waiting
89c3d0987ff8: Waiting
624d53d88d4f: Waiting
a813b9b02160: Waiting
1a69920eb76f: Waiting
cc0bd48514c8: Waiting
1f66c9308bfb: Waiting
b9b73a903710: Waiting
af470afbbc89: Waiting
72a84c721111: Waiting
3cda0a0c9fce: Waiting
eb656240bf23: Waiting
e9eeddd3b835: Waiting
c8a8c443a36d: Waiting
e8c96ef45380: Waiting
c5217c1b0c2b: Waiting
217d3c3dfd04: Waiting
e49c84cad388: Waiting
818112cde422: Waiting
8a09a59573df: Waiting
f4574f1c3e59: Waiting
72e94e7754a6: Waiting
eace5371c602: Waiting
8d89f09f034c: Waiting
a27f4cb1d30c: Waiting
793d43648071: Waiting
eb52762f819b: Waiting
1885f7b0fd89: Waiting
7989a014537b: Waiting
39ee7ffc893a: Waiting
f78502bc0caf: Waiting
0dce255a022c: Waiting
769ae72be349: Waiting
159a47a218b9: Waiting
8a8053ddbf5d: Waiting
cc808a3047a3: Waiting
229698bbb5e2: Waiting
0dffa3264b62: Waiting
a423931b1727: Waiting
eb52762f819b: Pushed
b8e2257fb0d6: Pushed
6e12394319bd: Pushed
9d16a37e1ef3: Pushed
5949e96455bf: Pushed
d451a9d827fe: Pushed
eaf8772b635f: Pushed
03c42faedace: Pushed
565be5c30f3a: Pushed
2f09f8ac7ac7: Pushed
5b6749230e66: Pushed
946a923e6d53: Pushed
5439af5ee0da: Pushed
a9cb74267f9b: Pushed
e50d96741584: Pushed
0e72bfaf1edb: Pushed
6014f79085f5: Pushed
88cbe5c5a0d7: Pushed
120a8d319c75: Pushed
4983107dade6: Pushed
7a980c7c8a2a: Pushed
2d022dd97464: Pushed
dc6b7f415160: Pushed
2729411ef26c: Pushed
010b930ff882: Pushed
035f08bb08b6: Pushed
f6f6de1b8612: Pushed
c7a71211be28: Pushed
b813e4e5d255: Pushed
236a2d160d2c: Pushed
c524988ade57: Pushed
deda9bcb6edd: Pushed
7f7cdd056196: Layer already exists
f472d48b3ff0: Layer already exists
1bbe107e47d2: Layer already exists
617df26c9e2b: Layer already exists
0.1.0: digest: sha256:470781cf836d88f31c5de00a477cd23d0809e07c7ccefef8441e3fce6169ab84 size: 18751
dineth@MacBookAir inventory_store % kubectl apply -f target/kubernetes/inventory_store/inventory_store.yaml
service/inventory-store unchanged
configmap/config-config-map unchanged
secret/config-secret unchanged
deployment.apps/inventory-store-deployment configured
horizontalpodautoscaler.autoscaling/inventory-store unchanged
dineth@MacBookAir inventory_store % kubectl port-forward svc/inventory-store 9090:9090
Forwarding from 127.0.0.1:9090 -> 9090
Forwarding from [::1]:9090 -> 9090
Handling connection for 9090
Handling connection for 9090
^[[A^C%  
dineth@MacBookAir inventory_store % bal build --cloud=k8s && docker push dinethsiriwardana/invenroty_app:0.1.0 && kubectl apply -f target/kubernetes/inventory_store/inventory_store.yaml && kubectl port-forward svc/inventory-store 9090:9090
Compiling source
dineth/inventory_store:0.1.0

Generating executable

Generating artifacts

        @kubernetes:Service
        @kubernetes:ConfigMap
        @kubernetes:Secret
        @kubernetes:Deployment
        @kubernetes:HPA

Building the docker image

[+] Building 29.2s (91/91) FINISHED docker:desktop-linux
=> [internal] load build definition from Dockerfile 0.0s
=> => transferring dockerfile: 5.25kB 0.0s
=> [internal] load metadata for docker.io/ballerina/jvm-runtime:2.0 5.2s
=> [auth] ballerina/jvm-runtime:pull token for registry-1.docker.io 0.0s
=> [internal] load .dockerignore 0.0s
=> => transferring context: 2B 0.0s
=> CACHED [ 1/85] FROM docker.io/ballerina/jvm-runtime:2.0@sha256:796189a0bc3432d885d515270edc164a7b32edbd049a1996eec3f3ce90f8cbe8 0.0s
=> [internal] load build context 0.0s
=> => transferring context: 88.74kB 0.0s
=> [ 2/85] COPY HikariCP-3.3.1.jar /home/ballerina/jars/ 0.0s
=> [ 3/85] COPY auth-native-2.11.0.jar /home/ballerina/jars/ 0.0s
=> [ 4/85] COPY ballerina-auth-2.11.0.jar /home/ballerina/jars/ 0.0s
=> [ 5/85] COPY ballerina-cache-3.8.0.jar /home/ballerina/jars/ 0.0s
=> [ 6/85] COPY ballerina-cloud-3.0.1.jar /home/ballerina/jars/ 0.0s
=> [ 7/85] COPY ballerina-constraint-1.5.0.jar /home/ballerina/jars/ 0.0s
=> [ 8/85] COPY ballerina-crypto-2.7.2.jar /home/ballerina/jars/ 0.0s
=> [ 9/85] COPY ballerina-file-1.9.0.jar /home/ballerina/jars/ 0.0s
=> [10/85] COPY ballerina-http-2.11.3.jar /home/ballerina/jars/ 0.1s
=> [11/85] COPY ballerina-http.httpscerr-2.11.3.jar /home/ballerina/jars/ 0.0s
=> [12/85] COPY ballerina-io-1.6.0.jar /home/ballerina/jars/ 0.0s
=> [13/85] COPY ballerina-jwt-2.12.1.jar /home/ballerina/jars/ 0.0s
=> [14/85] COPY ballerina-log-2.9.0.jar /home/ballerina/jars/ 0.0s
=> [15/85] COPY ballerina-mime-2.9.0.jar /home/ballerina/jars/ 0.0s
=> [16/85] COPY ballerina-oauth2-2.11.0.jar /home/ballerina/jars/ 0.0s
=> [17/85] COPY ballerina-observe-1.2.3.jar /home/ballerina/jars/ 0.0s
=> [18/85] COPY ballerina-observe.mockextension-1.2.3.jar /home/ballerina/jars/ 0.0s
=> [19/85] COPY ballerina-os-1.8.0.jar /home/ballerina/jars/ 0.0s
=> [20/85] COPY ballerina-rt-2201.9.2.jar /home/ballerina/jars/ 0.1s
=> [21/85] COPY ballerina-sql-1.13.2.jar /home/ballerina/jars/ 0.0s
=> [22/85] COPY ballerina-task-2.5.0.jar /home/ballerina/jars/ 0.0s
=> [23/85] COPY ballerina-time-2.4.0.jar /home/ballerina/jars/ 0.0s
=> [24/85] COPY ballerina-url-2.4.0.jar /home/ballerina/jars/ 0.0s
=> [25/85] COPY ballerinai-observe-0.0.0.jar /home/ballerina/jars/ 0.0s
=> [26/85] COPY ballerinax-mysql-1.12.0.jar /home/ballerina/jars/ 0.0s
=> [27/85] COPY ballerinax-mysql.driver-1.6.0.jar /home/ballerina/jars/ 0.1s
=> [28/85] COPY bcpg-jdk18on-1.78.jar /home/ballerina/jars/ 0.1s
=> [29/85] COPY bcpkix-jdk18on-1.78.jar /home/ballerina/jars/ 0.0s
=> [30/85] COPY bcprov-jdk18on-1.78.jar /home/ballerina/jars/ 0.1s
=> [31/85] COPY bcutil-jdk18on-1.78.jar /home/ballerina/jars/ 0.0s
=> [32/85] COPY cache-native-3.8.0.jar /home/ballerina/jars/ 0.0s
=> [33/85] COPY commons-pool-1.5.6.wso2v1.jar /home/ballerina/jars/ 0.0s
=> [34/85] COPY constraint-native-1.5.0.jar /home/ballerina/jars/ 0.0s
=> [35/85] COPY crypto-native-2.7.2.jar /home/ballerina/jars/ 0.0s
=> [36/85] COPY file-native-1.9.0.jar /home/ballerina/jars/ 0.0s
=> [37/85] COPY http-native-2.11.3.jar /home/ballerina/jars/ 0.0s
=> [38/85] COPY io-native-1.6.0.jar /home/ballerina/jars/ 0.0s
=> [39/85] COPY jakarta.activation-api-2.0.1.jar /home/ballerina/jars/ 0.0s
=> [40/85] COPY jboss-marshalling-2.0.5.Final.jar /home/ballerina/jars/ 0.0s
=> [41/85] COPY jwt-native-2.12.1.jar /home/ballerina/jars/ 0.0s
=> [42/85] COPY log-native-2.9.0.jar /home/ballerina/jars/ 0.0s
=> [43/85] COPY lz4-1.3.0.jar /home/ballerina/jars/ 0.0s
=> [44/85] COPY mime-native-2.9.0.jar /home/ballerina/jars/ 0.0s
=> [45/85] COPY mimepull-1.9.11.jar /home/ballerina/jars/ 0.0s
=> [46/85] COPY mysql-connector-j-8.0.31.jar /home/ballerina/jars/ 0.0s
=> [47/85] COPY mysql-native-1.12.0.jar /home/ballerina/jars/ 0.0s
=> [48/85] COPY mysql.driver-native-1.6.0.jar /home/ballerina/jars/ 0.0s
=> [49/85] COPY netty-buffer-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [50/85] COPY netty-codec-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [51/85] COPY netty-codec-http-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [52/85] COPY netty-codec-http2-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [53/85] COPY netty-codec-socks-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [54/85] COPY netty-common-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [55/85] COPY netty-handler-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [56/85] COPY netty-handler-proxy-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [57/85] COPY netty-resolver-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [58/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-linux-aarch_64.jar /home/ballerina/jars/ 0.0s
=> [59/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-linux-x86_64.jar /home/ballerina/jars/ 0.0s
=> [60/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-osx-aarch_64.jar /home/ballerina/jars/ 0.0s
=> [61/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-osx-x86_64.jar /home/ballerina/jars/ 0.0s
=> [62/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-windows-x86_64.jar /home/ballerina/jars/ 0.0s
=> [63/85] COPY netty-tcnative-boringssl-static-2.0.65.Final.jar /home/ballerina/jars/ 0.0s
=> [64/85] COPY netty-tcnative-classes-2.0.65.Final.jar /home/ballerina/jars/ 0.0s
=> [65/85] COPY netty-transport-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [66/85] COPY netty-transport-native-unix-common-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [67/85] COPY oauth2-native-2.11.0.jar /home/ballerina/jars/ 0.0s
=> [68/85] COPY observe-internal-native-1.2.2.jar /home/ballerina/jars/ 0.0s
=> [69/85] COPY observe-native-1.2.3.jar /home/ballerina/jars/ 0.0s
=> [70/85] COPY opentelemetry-sdk-common-1.0.0.jar /home/ballerina/jars/ 0.0s
=> [71/85] COPY opentelemetry-sdk-testing-1.0.0.jar /home/ballerina/jars/ 0.0s
=> [72/85] COPY opentelemetry-sdk-trace-1.0.0.jar /home/ballerina/jars/ 0.0s
=> [73/85] COPY opentelemetry-semconv-1.0.0-alpha.jar /home/ballerina/jars/ 0.0s
=> [74/85] COPY org.wso2.transport.local-file-system-6.0.55.jar /home/ballerina/jars/ 0.0s
=> [75/85] COPY os-native-1.8.0.jar /home/ballerina/jars/ 0.0s
=> [76/85] COPY os-test-utils-1.8.0.jar /home/ballerina/jars/ 0.0s
=> [77/85] COPY protobuf-java-3.20.3.jar /home/ballerina/jars/ 0.0s
=> [78/85] COPY quartz-2.3.2.jar /home/ballerina/jars/ 0.0s
=> [79/85] COPY sql-native-1.13.2.jar /home/ballerina/jars/ 0.0s
=> [80/85] COPY task-native-2.5.0.jar /home/ballerina/jars/ 0.0s
=> [81/85] COPY time-native-2.4.0.jar /home/ballerina/jars/ 0.0s
=> [82/85] COPY url-native-2.4.0.jar /home/ballerina/jars/ 0.0s
=> [83/85] COPY dineth-inventory_store-0.1.0.jar /home/ballerina/jars/ 0.0s
=> [84/85] RUN addgroup troupe && adduser -S -s /bin/bash -g 'ballerina' -G troupe -D ballerina && apk add --update --no-cache bash && rm -rf /var/cache/apk/\* 21.3s
=> [85/85] WORKDIR /home/ballerina 0.0s
=> exporting to image 0.4s
=> => exporting layers 0.4s
=> => writing image sha256:9b2183ba7e5ba0d95b02667b59db32ab9184785472fd0fb557ebf47bb1d0e3ee 0.0s
=> => naming to docker.io/dinethsiriwardana/invenroty_app:0.1.0 0.0s

1 warning found (use --debug to expand):

- InvalidBaseImagePlatform: Base image ballerina/jvm-runtime:2.0 was pulled with platform "linux/amd64", expected "linux/arm64" for current build (line 2)

View build details: docker-desktop://dashboard/build/desktop-linux/desktop-linux/qcw380pi8f83u4hkam2aj9tco

What's next:
View a summary of image vulnerabilities and recommendations → docker scout quickview

Execute the below command to deploy the Kubernetes artifacts:
kubectl apply -f /Users/dineth/Dineth/Programming/Ballerina/inventory_store/target/kubernetes/inventory_store

Execute the below command to access service via NodePort:
kubectl expose deployment inventory-store-deployment --type=NodePort --name=inventory-store-svc-local

        target/bin/inventory_store.jar

The push refers to repository [docker.io/dinethsiriwardana/invenroty_app]
5f70bf18a086: Preparing
93197a686056: Preparing
7d35105ef940: Preparing
1013e484b9ca: Preparing
65a246dbab6f: Preparing
7c85b81b8601: Waiting
1e92fb43d086: Waiting
a269b42fe9ff: Preparing
3fedc4d14868: Waiting
cf5aba15e5b0: Waiting
4cdc344f5de1: Waiting
319635cfbfbf: Waiting
03341d383e8d: Waiting
0f55b1f956cc: Waiting
9f5fefb90cc5: Waiting
9207a4ffe3e8: Waiting
2e31381df5fe: Waiting
b952c2306c01: Waiting
7f4fb615f0a8: Waiting
e42a6eb6b6c1: Waiting
2e7c0a1d58cf: Waiting
fd13c0894111: Waiting
04f47aeb2636: Waiting
3cbc961c579c: Waiting
25ac63897c05: Waiting
41d8ea22fd29: Waiting
d36756391c65: Waiting
b8196aa7d200: Waiting
03e591ab3083: Waiting
d8eb73494979: Waiting
fdd81d752fd7: Waiting
5623c46fb837: Waiting
3231f5f872be: Waiting
e5409779764a: Waiting
3e7df4bf0e6f: Waiting
49d911ce2d2a: Waiting
e71e19d78ffd: Waiting
61f081a86fd0: Waiting
62e9ee70c2f6: Waiting
87c1171957ee: Waiting
a77234b8b49f: Waiting
72ac9c6e280a: Waiting
f4d2dc7ce3c6: Waiting
5186a4ed418c: Waiting
7fe8510073b1: Waiting
2f723575999e: Waiting
10496608102f: Waiting
ac303bb83c45: Waiting
a206038a4792: Waiting
799efa4c1dba: Waiting
a1824fa4cd44: Waiting
778c405e66f0: Waiting
dd5210704413: Pushed
4452e5330025: Pushed
a9587bf9dc8f: Pushed
2cd9a12f6fd0: Pushed
f176c7832895: Pushed
18fe12fbb444: Pushed
38e7fe7c3c56: Pushed
aea673a0bd9f: Pushed
5c46ceb746fb: Pushed
2505da16d889: Pushed
819c1e13eb55: Pushed
b2e18ea843a3: Pushed
a9801377033e: Pushed
b45abbd7adc4: Pushed
21856926a0e9: Pushed
c34548ead0f5: Pushed
403d4caa1cc8: Pushed
93a573830561: Pushed
dad00094c864: Pushed
957a950f66db: Pushed
187625539360: Pushed
52e73fc00dc9: Pushed
5960a13c83a4: Pushed
e5999dbc41ad: Pushed
c5dd70953c5d: Pushed
b016b4922742: Pushed
4cd13f4b8ca1: Pushed
cc4ebeaa1583: Pushed
252d6191659c: Pushed
da8ad867ebe3: Pushed
21014c515535: Pushed
82e24806bba2: Pushed
7f7cdd056196: Layer already exists
f472d48b3ff0: Layer already exists
1bbe107e47d2: Layer already exists
617df26c9e2b: Layer already exists
0.1.0: digest: sha256:29d03208e47d153fe3fc7f63a7d68a3159c9cffea70174d61e1f0b632b444723 size: 18751
service/inventory-store unchanged
configmap/config-config-map unchanged
secret/config-secret unchanged
deployment.apps/inventory-store-deployment configured
horizontalpodautoscaler.autoscaling/inventory-store unchanged
Forwarding from 127.0.0.1:9090 -> 9090
Forwarding from [::1]:9090 -> 9090
Handling connection for 9090
Handling connection for 9090
Handling connection for 9090
Handling connection for 9090
Handling connection for 9090
Handling connection for 9090
^C%  
dineth@MacBookAir inventory_store % kubectl apply -f mysql_deployment.yml

service/mysql8-service unchanged
persistentvolumeclaim/init-script-pvc unchanged
persistentvolumeclaim/mysql-data-pvc unchanged
deployment.apps/mysql-deployment configured
dineth@MacBookAir inventory_store % bal build --cloud=k8s && docker push dinethsiriwardana/invenroty_app:0.1.0 && kubectl apply -f target/kubernetes/inventory_store/inventory_store.yaml && kubectl port-forward svc/inventory-store 9090:9090
Compiling source
dineth/inventory_store:0.1.0

Generating executable

Generating artifacts

        @kubernetes:Service
        @kubernetes:ConfigMap
        @kubernetes:Secret
        @kubernetes:Deployment
        @kubernetes:HPA

Building the docker image

[+] Building 24.7s (91/91) FINISHED docker:desktop-linux
=> [internal] load build definition from Dockerfile 0.0s
=> => transferring dockerfile: 5.25kB 0.0s
=> [internal] load metadata for docker.io/ballerina/jvm-runtime:2.0 2.4s
=> [auth] ballerina/jvm-runtime:pull token for registry-1.docker.io 0.0s
=> [internal] load .dockerignore 0.0s
=> => transferring context: 2B 0.0s
=> [internal] load build context 0.0s
=> => transferring context: 88.74kB 0.0s
=> CACHED [ 1/85] FROM docker.io/ballerina/jvm-runtime:2.0@sha256:796189a0bc3432d885d515270edc164a7b32edbd049a1996eec3f3ce90f8cbe8 0.0s
=> [ 2/85] COPY HikariCP-3.3.1.jar /home/ballerina/jars/ 0.0s
=> [ 3/85] COPY auth-native-2.11.0.jar /home/ballerina/jars/ 0.0s
=> [ 4/85] COPY ballerina-auth-2.11.0.jar /home/ballerina/jars/ 0.0s
=> [ 5/85] COPY ballerina-cache-3.8.0.jar /home/ballerina/jars/ 0.0s
=> [ 6/85] COPY ballerina-cloud-3.0.1.jar /home/ballerina/jars/ 0.0s
=> [ 7/85] COPY ballerina-constraint-1.5.0.jar /home/ballerina/jars/ 0.0s
=> [ 8/85] COPY ballerina-crypto-2.7.2.jar /home/ballerina/jars/ 0.0s
=> [ 9/85] COPY ballerina-file-1.9.0.jar /home/ballerina/jars/ 0.0s
=> [10/85] COPY ballerina-http-2.11.3.jar /home/ballerina/jars/ 0.0s
=> [11/85] COPY ballerina-http.httpscerr-2.11.3.jar /home/ballerina/jars/ 0.0s
=> [12/85] COPY ballerina-io-1.6.0.jar /home/ballerina/jars/ 0.0s
=> [13/85] COPY ballerina-jwt-2.12.1.jar /home/ballerina/jars/ 0.0s
=> [14/85] COPY ballerina-log-2.9.0.jar /home/ballerina/jars/ 0.0s
=> [15/85] COPY ballerina-mime-2.9.0.jar /home/ballerina/jars/ 0.0s
=> [16/85] COPY ballerina-oauth2-2.11.0.jar /home/ballerina/jars/ 0.0s
=> [17/85] COPY ballerina-observe-1.2.3.jar /home/ballerina/jars/ 0.0s
=> [18/85] COPY ballerina-observe.mockextension-1.2.3.jar /home/ballerina/jars/ 0.0s
=> [19/85] COPY ballerina-os-1.8.0.jar /home/ballerina/jars/ 0.1s
=> [20/85] COPY ballerina-rt-2201.9.2.jar /home/ballerina/jars/ 0.1s
=> [21/85] COPY ballerina-sql-1.13.2.jar /home/ballerina/jars/ 0.0s
=> [22/85] COPY ballerina-task-2.5.0.jar /home/ballerina/jars/ 0.0s
=> [23/85] COPY ballerina-time-2.4.0.jar /home/ballerina/jars/ 0.0s
=> [24/85] COPY ballerina-url-2.4.0.jar /home/ballerina/jars/ 0.0s
=> [25/85] COPY ballerinai-observe-0.0.0.jar /home/ballerina/jars/ 0.0s
=> [26/85] COPY ballerinax-mysql-1.12.0.jar /home/ballerina/jars/ 0.0s
=> [27/85] COPY ballerinax-mysql.driver-1.6.0.jar /home/ballerina/jars/ 0.0s
=> [28/85] COPY bcpg-jdk18on-1.78.jar /home/ballerina/jars/ 0.0s
=> [29/85] COPY bcpkix-jdk18on-1.78.jar /home/ballerina/jars/ 0.0s
=> [30/85] COPY bcprov-jdk18on-1.78.jar /home/ballerina/jars/ 0.1s
=> [31/85] COPY bcutil-jdk18on-1.78.jar /home/ballerina/jars/ 0.0s
=> [32/85] COPY cache-native-3.8.0.jar /home/ballerina/jars/ 0.0s
=> [33/85] COPY commons-pool-1.5.6.wso2v1.jar /home/ballerina/jars/ 0.0s
=> [34/85] COPY constraint-native-1.5.0.jar /home/ballerina/jars/ 0.0s
=> [35/85] COPY crypto-native-2.7.2.jar /home/ballerina/jars/ 0.0s
=> [36/85] COPY file-native-1.9.0.jar /home/ballerina/jars/ 0.0s
=> [37/85] COPY http-native-2.11.3.jar /home/ballerina/jars/ 0.0s
=> [38/85] COPY io-native-1.6.0.jar /home/ballerina/jars/ 0.0s
=> [39/85] COPY jakarta.activation-api-2.0.1.jar /home/ballerina/jars/ 0.0s
=> [40/85] COPY jboss-marshalling-2.0.5.Final.jar /home/ballerina/jars/ 0.0s
=> [41/85] COPY jwt-native-2.12.1.jar /home/ballerina/jars/ 0.0s
=> [42/85] COPY log-native-2.9.0.jar /home/ballerina/jars/ 0.0s
=> [43/85] COPY lz4-1.3.0.jar /home/ballerina/jars/ 0.0s
=> [44/85] COPY mime-native-2.9.0.jar /home/ballerina/jars/ 0.0s
=> [45/85] COPY mimepull-1.9.11.jar /home/ballerina/jars/ 0.0s
=> [46/85] COPY mysql-connector-j-8.0.31.jar /home/ballerina/jars/ 0.0s
=> [47/85] COPY mysql-native-1.12.0.jar /home/ballerina/jars/ 0.0s
=> [48/85] COPY mysql.driver-native-1.6.0.jar /home/ballerina/jars/ 0.0s
=> [49/85] COPY netty-buffer-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [50/85] COPY netty-codec-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [51/85] COPY netty-codec-http-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [52/85] COPY netty-codec-http2-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [53/85] COPY netty-codec-socks-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [54/85] COPY netty-common-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [55/85] COPY netty-handler-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [56/85] COPY netty-handler-proxy-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [57/85] COPY netty-resolver-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [58/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-linux-aarch_64.jar /home/ballerina/jars/ 0.0s
=> [59/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-linux-x86_64.jar /home/ballerina/jars/ 0.0s
=> [60/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-osx-aarch_64.jar /home/ballerina/jars/ 0.0s
=> [61/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-osx-x86_64.jar /home/ballerina/jars/ 0.0s
=> [62/85] COPY netty-tcnative-boringssl-static-2.0.65.Final-windows-x86_64.jar /home/ballerina/jars/ 0.0s
=> [63/85] COPY netty-tcnative-boringssl-static-2.0.65.Final.jar /home/ballerina/jars/ 0.0s
=> [64/85] COPY netty-tcnative-classes-2.0.65.Final.jar /home/ballerina/jars/ 0.0s
=> [65/85] COPY netty-transport-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [66/85] COPY netty-transport-native-unix-common-4.1.108.Final.jar /home/ballerina/jars/ 0.0s
=> [67/85] COPY oauth2-native-2.11.0.jar /home/ballerina/jars/ 0.0s
=> [68/85] COPY observe-internal-native-1.2.2.jar /home/ballerina/jars/ 0.0s
=> [69/85] COPY observe-native-1.2.3.jar /home/ballerina/jars/ 0.0s
=> [70/85] COPY opentelemetry-sdk-common-1.0.0.jar /home/ballerina/jars/ 0.0s
=> [71/85] COPY opentelemetry-sdk-testing-1.0.0.jar /home/ballerina/jars/ 0.0s
=> [72/85] COPY opentelemetry-sdk-trace-1.0.0.jar /home/ballerina/jars/ 0.0s
=> [73/85] COPY opentelemetry-semconv-1.0.0-alpha.jar /home/ballerina/jars/ 0.0s
=> [74/85] COPY org.wso2.transport.local-file-system-6.0.55.jar /home/ballerina/jars/ 0.0s
=> [75/85] COPY os-native-1.8.0.jar /home/ballerina/jars/ 0.0s
=> [76/85] COPY os-test-utils-1.8.0.jar /home/ballerina/jars/ 0.0s
=> [77/85] COPY protobuf-java-3.20.3.jar /home/ballerina/jars/ 0.0s
=> [78/85] COPY quartz-2.3.2.jar /home/ballerina/jars/ 0.0s
=> [79/85] COPY sql-native-1.13.2.jar /home/ballerina/jars/ 0.0s
=> [80/85] COPY task-native-2.5.0.jar /home/ballerina/jars/ 0.0s
=> [81/85] COPY time-native-2.4.0.jar /home/ballerina/jars/ 0.0s
=> [82/85] COPY url-native-2.4.0.jar /home/ballerina/jars/ 0.0s
=> [83/85] COPY dineth-inventory_store-0.1.0.jar /home/ballerina/jars/ 0.0s
=> [84/85] RUN addgroup troupe && adduser -S -s /bin/bash -g 'ballerina' -G troupe -D ballerina && apk add --update --no-cache bash && rm -rf /var/cache/apk/\* 19.7s
=> [85/85] WORKDIR /home/ballerina 0.0s
=> exporting to image 0.5s
=> => exporting layers 0.5s
=> => writing image sha256:1489b1e610e2af14dca318bd8ac26fa5ad5ec86c4eed76228a02466b0208149d 0.0s
=> => naming to docker.io/dinethsiriwardana/invenroty_app:0.1.0 0.0s

1 warning found (use --debug to expand):

- InvalidBaseImagePlatform: Base image ballerina/jvm-runtime:2.0 was pulled with platform "linux/amd64", expected "linux/arm64" for current build (line 2)

View build details: docker-desktop://dashboard/build/desktop-linux/desktop-linux/g7vwtbgz08vgc4gnzxu4fxyng

What's next:
View a summary of image vulnerabilities and recommendations → docker scout quickview

Execute the below command to deploy the Kubernetes artifacts:
kubectl apply -f /Users/dineth/Dineth/Programming/Ballerina/inventory_store/target/kubernetes/inventory_store

Execute the below command to access service via NodePort:
kubectl expose deployment inventory-store-deployment --type=NodePort --name=inventory-store-svc-local

        target/bin/inventory_store.jar

The push refers to repository [docker.io/dinethsiriwardana/invenroty_app]
5f70bf18a086: Preparing
824e3eb1dec6: Preparing
1f5e951932ac: Preparing
7d8027a91c44: Preparing
2f61b7dc986c: Preparing
88d5c9df30a2: Preparing
68baed96f017: Preparing
159347f42687: Preparing
698690f1fb4c: Preparing
aef75b180ccb: Preparing
7c2407badf28: Preparing
0b72098b2284: Preparing
7157e4da14f2: Preparing
b065b18fa8e8: Preparing
5338891f01f2: Preparing
8ded864a5969: Preparing
9aa1cf054c4e: Preparing
6419b2c4ba37: Preparing
1842d5fc697c: Preparing
3f378720344e: Preparing
901ff8ba09df: Preparing
585f2f4e669e: Preparing
64f66e89c482: Preparing
fc9556c8d57b: Preparing
8ded864a5969: Waiting
eba769fe74de: Preparing
1842d5fc697c: Waiting
4ac470dca990: Waiting
fc9556c8d57b: Waiting
4b574da5dc93: Waiting
0e5a705f76cb: Waiting
698690f1fb4c: Waiting
d78929e274ad: Waiting
5338891f01f2: Waiting
68baed96f017: Waiting
abc71be1bf00: Waiting
9010d948de08: Waiting
7f464c99d451: Waiting
dc9aa233a803: Waiting
fd0ddc022b4f: Waiting
8f28389db6b9: Waiting
f47b126ff78f: Waiting
bf587d66f632: Waiting
529e6f10fdd3: Preparing
80e5868a1e66: Preparing
aa418ec59792: Preparing
07629130922c: Preparing
243aaa52177d: Preparing
b4980cf0c683: Preparing
b5ddeda8e329: Preparing
9f5485929fa8: Preparing
05290f4e108e: Preparing
b9fe389970de: Preparing
7ed3e8a574b6: Preparing
08abecfad437: Waiting
243aaa52177d: Waiting
05290f4e108e: Waiting
cce478c5549d: Waiting
cc24e8e55b45: Waiting
515c4202a740: Waiting
b9fe389970de: Waiting
71bb7eec068f: Waiting
4318aa405755: Waiting
39e97d3fc9f8: Waiting
0757cc170ec5: Waiting
0dbd933cd7a3: Waiting
e06785dfaef6: Waiting
5c422b40f171: Waiting
6791ed69d954: Waiting
32f7f88fec48: Waiting
1c78a3734954: Waiting
a97a4aaa02c2: Waiting
4f643700a784: Waiting
442aeb0819f3: Waiting
5980c411965d: Waiting
929434bef570: Waiting
b54f8e6cd367: Waiting
0ddb7e4f2e70: Waiting
929434bef570: Pushed
242ebbd9dec5: Pushed
8622610df5be: Pushed
d67a10cba9f8: Pushed
9d59f921fd00: Pushed
11fbf1aa5049: Pushed
7f7cdd056196: Layer already exists
f472d48b3ff0: Layer already exists
1bbe107e47d2: Layer already exists
617df26c9e2b: Layer already exists
0.1.0: digest: sha256:07d3b28072c5d024b6c3fc37c62b516ce8e4ee3a7fddb42f0256245f1ba3e22c size: 18751
service/inventory-store unchanged
configmap/config-config-map unchanged
secret/config-secret unchanged
deployment.apps/inventory-store-deployment configured
horizontalpodautoscaler.autoscaling/inventory-store unchanged
Forwarding from 127.0.0.1:9090 -> 9090
Forwarding from [::1]:9090 -> 9090
Handling connection for 9090
Handling connection for 9090
^C%  
dineth@MacBookAir inventory_store % kubectl get pods

NAME READY STATUS RESTARTS AGE
hello-k8s-deployment-6459cb8fbd-k9x4v 1/1 Running 0 11h
inventory-store-deployment-5554b667db-64bqb 0/1 Running 0 31m
inventory-store-deployment-5554b667db-fbs8t 0/1 Running 0 88s
mysql-deployment-798ff6985-n688x 1/1 Running 1 (2m58s ago) 6m2s
dineth@MacBookAir inventory_store % kubectl exec -it mysql-deployment-798ff6985-n688x -- /bin/bash
Defaulted container "mysql8" out of: mysql8, init-script (init)
bash-4.4# command terminated with exit code 137
dineth@MacBookAir inventory_store % kubectl get pods

NAME READY STATUS RESTARTS AGE
hello-k8s-deployment-6459cb8fbd-k9x4v 1/1 Running 0 11h
inventory-store-deployment-5554b667db-64bqb 0/1 Running 0 32m
inventory-store-deployment-5554b667db-fbs8t 0/1 Running 0 2m7s
mysql-deployment-798ff6985-n688x 0/1 Running 2 (7s ago) 6m41s
dineth@MacBookAir inventory_store % kubectl get pods

NAME READY STATUS RESTARTS AGE
hello-k8s-deployment-6459cb8fbd-k9x4v 1/1 Running 0 11h
inventory-store-deployment-5554b667db-64bqb 0/1 Running 0 32m
inventory-store-deployment-5554b667db-fbs8t 0/1 Running 0 2m15s
mysql-deployment-798ff6985-n688x 1/1 Running 2 (15s ago) 6m49s
dineth@MacBookAir inventory_store % kubectl port-forward svc/inventory-store 9090:9090  
Forwarding from 127.0.0.1:9090 -> 9090
Forwarding from [::1]:9090 -> 9090
Handling connection for 9090
Handling connection for 9090
^C%  
dineth@MacBookAir inventory_store % kubectl port-forward svc/inventory-store 9090:9090
Forwarding from 127.0.0.1:9090 -> 9090
Forwarding from [::1]:9090 -> 9090
^C%  
dineth@MacBookAir inventory_store % kubectl exec -it mysql-deployment-798ff6985-n688x -- /bin/bash
Defaulted container "mysql8" out of: mysql8, init-script (init)
bash-4.4# mysql -u root -p
Enter password:
Welcome to the MySQL monitor. Commands end with ; or \g.
Your MySQL connection id is 50
Server version: 8.0.33 MySQL Community Server - GPL

Copyright (c) 2000, 2023, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> show Database
-> ;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Database' at line 1
mysql> show Databases;
+--------------------+
| Database |
+--------------------+
| information_schema |
| mysql |
| performance_schema |
| storedb |
| sys |
+--------------------+
5 rows in set (0.11 sec)

mysql> use storedb
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> show tables:
-> ;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':' at line 1
mysql> show tables;
+-------------------+
| Tables_in_storedb |
+-------------------+
| Inventory |
+-------------------+
1 row in set (0.01 sec)

mysql> CREATE TABLE IF NOT EXISTS inventory ( id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(255) NOT NULL, quentity INT NOT NULL);
Query OK, 0 rows affected (0.11 sec)

mysql> command terminated with exit code 137
dineth@MacBookAir inventory_store % kubectl delete -f mysql-deployment.yml
error: the path "mysql-deployment.yml" does not exist
dineth@MacBookAir inventory_store % kubectl delete -f mysql_deployment.yml
service "mysql8-service" deleted
persistentvolumeclaim "init-script-pvc" deleted
persistentvolumeclaim "mysql-data-pvc" deleted
deployment.apps "mysql-deployment" deleted
dineth@MacBookAir inventory_store % kubectl delete -f target/kubernetes/inventory_store/inventory_store.yaml
service "inventory-store" deleted
configmap "config-config-map" deleted
secret "config-secret" deleted
deployment.apps "inventory-store-deployment" deleted
horizontalpodautoscaler.autoscaling "inventory-store" deleted
dineth@MacBookAir inventory_store %
